<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>TimerMSP432.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2298ed0e5bfee6f293aea6c715ac7f7c.html">exports</a></li><li class="navelem"><a class="el" href="dir_1395dc6568e73d67e90e363c4035e4f6.html">tidrivers_msp432</a></li><li class="navelem"><a class="el" href="dir_2ad5680906f12c9eddf121ba68442a90.html">source</a></li><li class="navelem"><a class="el" href="dir_0da705fc44f28017c66964e8e9f342d2.html">ti</a></li><li class="navelem"><a class="el" href="dir_5cee8d03ec8e05f2dc78c474d8f4ba05.html">drivers</a></li><li class="navelem"><a class="el" href="dir_4bb2686e0a7b629c95e678ef3397106b.html">timer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">TimerMSP432.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Timer driver interface for MSP432 devices. </p>
<hr/>
<h1>Operation</h1>
<p>This driver implements two independent hardware peripherals on the MSP432: Timer_A and Timer32. The Timer_A implementation supports two clock sources, SMCLK and ACLCK, with multiple clock dividers. The Timer32 implementation supports a single clock source, MCLK, with 3 clock dividers. For each driver instance, the configuration of the clock dividers is determined using the clock source, period, and period units. Note that the SMCLK and MCLK frequencies can change after <a class="el" href="_timer_8h.html#a85fff65681abf4b7d65309aeac73c52c" title="Function to initialize a given timer peripheral specified by the index argument. The Timer_Params spe...">Timer_open()</a>.</p>
<h3>MPS432 Timer Driver Configuration</h3>
<p>In order to use the Timer APIs, the application is required to define 4 configuration items in the application ti_drivers_config.c file:</p>
<ol type="1">
<li>An array of <a class="el" href="struct_timer_m_s_p432___object.html" title="TimerMSP432 Object. ">TimerMSP432_Object</a> elements, which will be used by by the driver to maintain instance state. Below is an example <a class="el" href="struct_timer_m_s_p432___object.html" title="TimerMSP432 Object. ">TimerMSP432_Object</a> array appropriate for the MSP432 LaunchPad board: <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_timer_8h.html">ti/drivers/Timer.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_timer_m_s_p432_8h.html">ti/drivers/timer/TimerMSP432.h</a>&gt;</span></div><div class="line"></div><div class="line"><a class="code" href="struct_timer_m_s_p432___object.html">TimerMSP432_Object</a> timerMSP432Objects[3];</div></div><!-- fragment --></li>
<li>An array of <a class="el" href="struct_timer_m_s_p432___h_w_attrs.html" title="TimerMSP432 Hardware Attributes. ">TimerMSP432_HWAttrs</a> elements that defines which</li>
</ol>
<p>Below is an example <a class="el" href="struct_timer_m_s_p432___h_w_attrs.html" title="TimerMSP432 Hardware Attributes. ">TimerMSP432_HWAttrs</a> array appropriate for the MSP432 LaunchPad board: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="struct_timer_m_s_p432___h_w_attrs.html">TimerMSP432_HWAttrs</a> timerMSP432HWAttrs[3] =</div><div class="line">{</div><div class="line">    {</div><div class="line">        .<a class="code" href="struct_timer_m_s_p432___h_w_attrs.html#afb2d40717cba65259f404bc32d3cfb7e">timerBaseAddress</a> = TIMER32_0_BASE,</div><div class="line">        .clockSource = TIMER_A_CLOCKSOURCE_SMCLK,</div><div class="line">        .intNum = INT_T32_INT1,</div><div class="line">        .intPriority = ~0,</div><div class="line">    },</div><div class="line">    {</div><div class="line">        .timerBaseAddress = TIMER_A1_BASE,</div><div class="line">        .clockSource = TIMER_A_CLOCKSOURCE_SMCLK,</div><div class="line">        .intNum = INT_TA1_0,</div><div class="line">        .intPriority = ~0,</div><div class="line">    },</div><div class="line">    {</div><div class="line">        .timerBaseAddress = TIMER_A2_BASE,</div><div class="line">        .clockSource = TIMER_A_CLOCKSOURCE_ACLK,</div><div class="line">        .intNum = INT_TA2_0,</div><div class="line">        .intPriority = ~0,</div><div class="line">    },</div><div class="line">};</div></div><!-- fragment --><ol type="1">
<li>An array of <a class="el" href="_timer_8h.html#a4c61ce326e1836cd5a5f9d9a728c1ac4">Timer_Config</a> elements, one for each Timer instance. Each element of this array identifies the device-specific API function table, the device specific timer object instance, and the device specific Hardware Attributes to be used for each timer instance. Below is an example <a class="el" href="_timer_8h.html#a4c61ce326e1836cd5a5f9d9a728c1ac4">Timer_Config</a> array appropriate for the MSP432 LaunchPad board: <div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="struct_timer___config__.html">Timer_Config</a> Timer_config[3] = {</div><div class="line">  {</div><div class="line">      .<a class="code" href="struct_timer___config__.html#ad729580a94414d8dddf43fa91e2a570a">fxnTablePtr</a> = &amp;<a class="code" href="_timer_m_s_p432_8h.html#adfc465b5a2bf4e50e5f30f996313fdf6">TimerMSP432_Timer32_fxnTable</a>,</div><div class="line">      .object = &amp;timerMSP432Objects[0],</div><div class="line">      .hwAttrs = &amp;timerMSP432HWAttrs[0]</div><div class="line">  },</div><div class="line">  {</div><div class="line">      .fxnTablePtr = &amp;<a class="code" href="_timer_m_s_p432_8h.html#ad3b622d4875264bf82f29de28fcc9b9e">TimerMSP432_Timer_A_fxnTable</a>,</div><div class="line">      .object = &amp;timerMSP432Objects[1],</div><div class="line">      .hwAttrs = &amp;timerMSP432HWAttrs[1]</div><div class="line">  }</div><div class="line">  {</div><div class="line">      .fxnTablePtr = &amp;<a class="code" href="_timer_m_s_p432_8h.html#ad3b622d4875264bf82f29de28fcc9b9e">TimerMSP432_Timer_A_fxnTable</a>,</div><div class="line">      .object = &amp;timerMSP432Objects[2],</div><div class="line">      .hwAttrs = &amp;timerMSP432HWAttrs[2]</div><div class="line">  }</div><div class="line">};</div></div><!-- fragment --></li>
<li>A global variable, Timer_count, that informs the driver how many timer instances are defined: <div class="fragment"><div class="line"><span class="keyword">const</span> uint_least8_t Timer_count = 3;</div></div><!-- fragment --></li>
</ol>
<h1>Resource Allocation</h1>
<p>Allocation of each timer peripheral is managed through a set of resource allocation APIs. For example, the TimerMSP432_allocateTimerResource API will allocate a timer for exclusive use. Any attempt to allocate this resource in the future will result in a false value being returned from the allocation API. To free a timer resource, the TimerMSP432_freeTimerResource is used. The application is not responsible for calling these allocation APIs directly.</p>
<h3>Power Management</h3>
<p>The TI-RTOS power management framework will try to put the device into the most power efficient mode whenever possible. Please see the technical reference manual for further details on each power mode.</p>
<p>This driver supports dynamic power performance levels. The driver will determine which power performance levels are compatible with the desired period and period units. The driver prevents transitions to performance levels in which the period cannot be generated.</p>
<p>After a performance level change, the period is recalculated such that the generated period will remain the same. The exact period may vary after a performance level transition. This is due to a change in clock frequency and hence period per clock cycle.</p>
<p>The following statements are valid:</p><ul>
<li>After <a class="el" href="_timer_8h.html#a85fff65681abf4b7d65309aeac73c52c" title="Function to initialize a given timer peripheral specified by the index argument. The Timer_Params spe...">Timer_open()</a>: Clocks are enabled to the timer resource. Dynamic performance level changes are allowed.</li>
<li>After <a class="el" href="_timer_8h.html#ae2f09cd2a7f7251e5fffade75378c332" title="Function to start the timer. ">Timer_start()</a>: DEEPSLEEP mode is disabled. The device can only go to Idle power mode. Performance level changes are not allowed.</li>
<li>After <a class="el" href="_timer_8h.html#a3b951947aeec93b4610f87ba7b8a8621" title="Function to stop timer. If the timer is already stopped, this function has no effect. ">Timer_stop()</a>: Conditions are equal as for after Timer_open.</li>
<li>After <a class="el" href="_timer_8h.html#a826779747913a65d4f683a627fd0759f" title="Function to close a timer. The corresponding timer to the Timer_Handle becomes an available timer res...">Timer_close()</a>: The underlying GPTimer is turned off, and the clock to the timer and pin are disabled. </li>
</ul>
</div><div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_power_8h_source.html">ti/drivers/Power.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_timer_8h_source.html">ti/drivers/Timer.h</a>&gt;</code><br />
<code>#include &lt;ti/drivers/dpl/HwiP.h&gt;</code><br />
<code>#include &lt;ti/drivers/dpl/SemaphoreP.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for TimerMSP432.h:</div>
<div class="dyncontent">
<div class="center"><img src="_timer_m_s_p432_8h__incl.png" border="0" usemap="#_timer_m_s_p432_8h" alt=""/></div>
<map name="_timer_m_s_p432_8h" id="_timer_m_s_p432_8h">
<area shape="rect" id="node4" href="_power_8h.html" title="Power Manager. " alt="" coords="83,80,207,107"/>
<area shape="rect" id="node7" href="_timer_8h.html" title="Timer driver. " alt="" coords="285,155,405,181"/>
<area shape="rect" id="node5" href="_list_8h.html" title="Linked List interface for use in drivers. " alt="" coords="75,155,211,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="_timer_m_s_p432_8h__dep__incl.png" border="0" usemap="#_timer_m_s_p432_8hdep" alt=""/></div>
<map name="_timer_m_s_p432_8hdep" id="_timer_m_s_p432_8hdep">
<area shape="rect" id="node2" href="_capture_m_s_p432_8h.html" title="Capture driver interface for MSP432 devices. " alt="" coords="5,80,135,107"/>
</map>
</div>
</div>
<p><a href="_timer_m_s_p432_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_timer_m_s_p432___h_w_attrs.html">TimerMSP432_HWAttrs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">TimerMSP432 Hardware Attributes.  <a href="struct_timer_m_s_p432___h_w_attrs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_timer_m_s_p432___object.html">TimerMSP432_Object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">TimerMSP432 Object.  <a href="struct_timer_m_s_p432___object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4bfb67ec5f2dbd00d6c0274d42afa38c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_timer_m_s_p432_8h.html#a4bfb67ec5f2dbd00d6c0274d42afa38c">TimerMSP432_allocateTimerResource</a> (uint32_t baseAddress)</td></tr>
<tr class="memdesc:a4bfb67ec5f2dbd00d6c0274d42afa38c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to allocate a timer peripheral.  <a href="#a4bfb67ec5f2dbd00d6c0274d42afa38c">More...</a><br /></td></tr>
<tr class="separator:a4bfb67ec5f2dbd00d6c0274d42afa38c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa86618630f05a6439da89aa61987dc0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_timer_m_s_p432_8h.html#aa86618630f05a6439da89aa61987dc0c">TimerMSP432_freeTimerResource</a> (uint32_t baseAddress)</td></tr>
<tr class="memdesc:aa86618630f05a6439da89aa61987dc0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to de-allocate a timer peripheral.  <a href="#aa86618630f05a6439da89aa61987dc0c">More...</a><br /></td></tr>
<tr class="separator:aa86618630f05a6439da89aa61987dc0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad3b622d4875264bf82f29de28fcc9b9e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_timer___fxn_table.html">Timer_FxnTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_timer_m_s_p432_8h.html#ad3b622d4875264bf82f29de28fcc9b9e">TimerMSP432_Timer_A_fxnTable</a></td></tr>
<tr class="separator:ad3b622d4875264bf82f29de28fcc9b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfc465b5a2bf4e50e5f30f996313fdf6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_timer___fxn_table.html">Timer_FxnTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_timer_m_s_p432_8h.html#adfc465b5a2bf4e50e5f30f996313fdf6">TimerMSP432_Timer32_fxnTable</a></td></tr>
<tr class="separator:adfc465b5a2bf4e50e5f30f996313fdf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4bfb67ec5f2dbd00d6c0274d42afa38c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bfb67ec5f2dbd00d6c0274d42afa38c">&sect;&nbsp;</a></span>TimerMSP432_allocateTimerResource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TimerMSP432_allocateTimerResource </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>baseAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to allocate a timer peripheral. </p>
<p>This function is intended to be used by any driver which implements a timer hardware peripheral.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>The base address of a timer hardware peripheral.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A bool returning true if the timer resource was successfully allocated. If the base address is not valid or if the resource is not available, false is returned.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_timer_m_s_p432_8h.html#aa86618630f05a6439da89aa61987dc0c" title="Function to de-allocate a timer peripheral. ">TimerMSP432_freeTimerResource()</a> </dd></dl>

</div>
</div>
<a id="aa86618630f05a6439da89aa61987dc0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa86618630f05a6439da89aa61987dc0c">&sect;&nbsp;</a></span>TimerMSP432_freeTimerResource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TimerMSP432_freeTimerResource </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>baseAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to de-allocate a timer peripheral. </p>
<p>This function is intended to be used by any driver which implements a timer hardware peripheral. Calling this function will release power constraints set in <a class="el" href="_timer_m_s_p432_8h.html#a4bfb67ec5f2dbd00d6c0274d42afa38c" title="Function to allocate a timer peripheral. ">TimerMSP432_allocateTimerResource()</a>;</p>
<dl class="section pre"><dt>Precondition</dt><dd>A successful call to <a class="el" href="_timer_m_s_p432_8h.html#a4bfb67ec5f2dbd00d6c0274d42afa38c" title="Function to allocate a timer peripheral. ">TimerMSP432_allocateTimerResource()</a> using the baseAddress must have been made prior to calling this API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baseAddress</td><td>The base address of a timer hardware peripheral.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_timer_m_s_p432_8h.html#a4bfb67ec5f2dbd00d6c0274d42afa38c" title="Function to allocate a timer peripheral. ">TimerMSP432_allocateTimerResource()</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad3b622d4875264bf82f29de28fcc9b9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3b622d4875264bf82f29de28fcc9b9e">&sect;&nbsp;</a></span>TimerMSP432_Timer_A_fxnTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_timer___fxn_table.html">Timer_FxnTable</a> TimerMSP432_Timer_A_fxnTable</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adfc465b5a2bf4e50e5f30f996313fdf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfc465b5a2bf4e50e5f30f996313fdf6">&sect;&nbsp;</a></span>TimerMSP432_Timer32_fxnTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_timer___fxn_table.html">Timer_FxnTable</a> TimerMSP432_Timer32_fxnTable</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2019</a>, Texas Instruments Incorporated. All rights reserved. <br>
  <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
