<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>NVSMSP432_HWAttrs Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">NVSMSP432_HWAttrs Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>NVSMSP432 attributes.  
 <a href="struct_n_v_s_m_s_p432___h_w_attrs.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_n_v_s_m_s_p432_8h_source.html">NVSMSP432.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a00f78f3742a497680be8f27f4f96f4eb"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_n_v_s_m_s_p432___h_w_attrs.html#a00f78f3742a497680be8f27f4f96f4eb">regionBase</a></td></tr>
<tr class="separator:a00f78f3742a497680be8f27f4f96f4eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a811c92dc4217f903e0ff7d78ccff9253"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_n_v_s_m_s_p432___h_w_attrs.html#a811c92dc4217f903e0ff7d78ccff9253">regionSize</a></td></tr>
<tr class="separator:a811c92dc4217f903e0ff7d78ccff9253"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>NVSMSP432 attributes. </p>
<p>The 'regionBase' field must point to the base address of the region to be managed.</p>
<p>The regionSize must be an integer multiple of the flash sector size. For most MSP432 devices, the flash sector size is 4096 bytes. The NVSMSP432 driver will determine the device's actual sector size by reading internal system configuration registers.</p>
<p>Care must be taken to ensure that the linker does not unintentionally place application content (e.g., code/data) in the flash regions.</p>
<p>For CCS and IAR tools, defining and reserving flash memory regions can be done entirely within the ti_drivers_config.c file. For GCC, additional content is required in the application's linker command file to achieve the same result.</p>
<p>The example below defines a char array 'flashBuf' and uses CCS and IAR compiler pragmas to place 'flashBuf' at a specific address within the flash memory.</p>
<p>For GCC, the 'flashBuf' array is placed into a named linker section. Corresponding linker commands are added to the application's linker command file to place the section at a specific flash memory address. The section placement command is carefully chosen to only RESERVE space for the 'flashBuf' array, and not to actually initialize it during the application load process, thus preserving the content of flash.</p>
<p>The 'regionBase' fields of the two HWAttrs region instances are initialized to point to the base address of 'flashBuf' and to some offset from the base of the char array.</p>
<p>The linker command syntax is carefully chosen to only RESERVE space for the char array and not to actually initialize it during application load.</p>
<div class="fragment"><div class="line"><span class="preprocessor"> #define SECTORSIZE 0x1000</span></div><div class="line"><span class="preprocessor"> #define FLASH_REGION_BASE 0x3b000</span></div><div class="line"></div><div class="line"> <span class="comment">//</span></div><div class="line"> <span class="comment">// Reserve flash sectors for NVS driver use</span></div><div class="line"> <span class="comment">// by placing an uninitialized byte array</span></div><div class="line"> <span class="comment">// at the desired flash address.</span></div><div class="line"> <span class="comment">//</span></div><div class="line"><span class="preprocessor"> #if defined(__TI_COMPILER_VERSION__)</span></div><div class="line"></div><div class="line"> <span class="comment">//</span></div><div class="line"> <span class="comment">//  Place uninitialized array at FLASH_REGION_BASE</span></div><div class="line"> <span class="comment">//</span></div><div class="line"><span class="preprocessor"> #pragma LOCATION(flashBuf, FLASH_REGION_BASE);</span></div><div class="line"><span class="preprocessor"> #pragma NOINIT(flashBuf);</span></div><div class="line"> <span class="keywordtype">char</span> flashBuf[SECTORSIZE * 4];</div><div class="line"></div><div class="line"><span class="preprocessor"> #elif defined(__IAR_SYSTEMS_ICC__)</span></div><div class="line"></div><div class="line"> <span class="comment">//</span></div><div class="line"> <span class="comment">//  Place uninitialized array at FLASH_REGION_BASE</span></div><div class="line"> <span class="comment">//</span></div><div class="line"> __no_init <span class="keywordtype">char</span> flashBuf[SECTORSIZE * 4] @ FLASH_REGION_BASE;</div><div class="line"></div><div class="line"><span class="preprocessor"> #elif defined(__GNUC__)</span></div><div class="line"></div><div class="line"> <span class="comment">//</span></div><div class="line"> <span class="comment">//  Place the flash buffers in the .nvs section created in the gcc linker file.</span></div><div class="line"> <span class="comment">//  The .nvs section enforces alignment on a sector boundary but may</span></div><div class="line"> <span class="comment">//  be placed anywhere in flash memory.  If desired the .nvs section can be set</span></div><div class="line"> <span class="comment">//  to a fixed address by changing the following in the gcc linker file:</span></div><div class="line"></div><div class="line">.nvs (FIXED_FLASH_ADDR) (NOLOAD) : AT (FIXED_FLASH_ADDR) {</div><div class="line">     *(.nvs)</div><div class="line">} &gt; REGION_TEXT</div><div class="line"></div><div class="line"> __attribute__ ((section (<span class="stringliteral">&quot;.nvs&quot;</span>)))</div><div class="line"> <span class="keywordtype">char</span> flashBuf[SECTORSIZE * 4];</div><div class="line"></div><div class="line"><span class="preprocessor"> #endif</span></div><div class="line"></div><div class="line"> <a class="code" href="struct_n_v_s_m_s_p432___h_w_attrs.html">NVSMSP432_HWAttrs</a> nvsMSP432HWAttrs[2] = {</div><div class="line">     <span class="comment">//</span></div><div class="line">     <span class="comment">// region 0 is 1 flash sector in length.</span></div><div class="line">     <span class="comment">//</span></div><div class="line">     {</div><div class="line">         .<a class="code" href="struct_n_v_s_m_s_p432___h_w_attrs.html#a00f78f3742a497680be8f27f4f96f4eb">regionBase</a> = (<span class="keywordtype">void</span> *)flashBuf,</div><div class="line">         .<a class="code" href="struct_n_v_s_m_s_p432___h_w_attrs.html#a811c92dc4217f903e0ff7d78ccff9253">regionSize</a> = SECTORSIZE,</div><div class="line">     },</div><div class="line">     <span class="comment">//</span></div><div class="line">     <span class="comment">// region 1 is 3 flash sectors in length.</span></div><div class="line">     <span class="comment">//</span></div><div class="line">     {</div><div class="line">         .regionBase = (<span class="keywordtype">void</span> *)(flashBuf + SECTORSIZE),</div><div class="line">         .regionSize = SECTORSIZE*3,</div><div class="line">     }</div><div class="line"> };</div><div class="line"></div><div class="line"> Example GCC linker command file content reserves flash space</div><div class="line"> but does not initialize it:</div><div class="line"></div><div class="line"> MEMORY</div><div class="line"> {</div><div class="line">     MAIN_FLASH (RX) : ORIGIN = 0x00000000, LENGTH = 0x00040000</div><div class="line">     INFO_FLASH (RX) : ORIGIN = 0x00200000, LENGTH = 0x00004000</div><div class="line">     SRAM_CODE  (RWX): ORIGIN = 0x01000000, LENGTH = 0x00010000</div><div class="line">     SRAM_DATA  (RW) : ORIGIN = 0x20000000, LENGTH = 0x00010000</div><div class="line"> }</div><div class="line"></div><div class="line"> .nvs (0x3b000) (NOLOAD) : AT (0x3b000) {</div><div class="line">     KEEP (*(.nvs))</div><div class="line"> } &gt; NVS</div></div><!-- fragment --> </div><h2 class="groupheader">Field Documentation</h2>
<a id="a00f78f3742a497680be8f27f4f96f4eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f78f3742a497680be8f27f4f96f4eb">&sect;&nbsp;</a></span>regionBase</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* NVSMSP432_HWAttrs::regionBase</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Base address of flash region </p>

</div>
</div>
<a id="a811c92dc4217f903e0ff7d78ccff9253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a811c92dc4217f903e0ff7d78ccff9253">&sect;&nbsp;</a></span>regionSize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t NVSMSP432_HWAttrs::regionSize</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The size of the region in bytes </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="_n_v_s_m_s_p432_8h_source.html">NVSMSP432.h</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2019</a>, Texas Instruments Incorporated. All rights reserved. <br>
  <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
